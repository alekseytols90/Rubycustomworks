<div class="row invitation-box container">
  <div class="col-md-8 col-md-offset-1">
    <%= render 'validation_errors' %>
    <div class="panel panel-primary" id="yes-form">
      <div class="panel-heading">
        <span class="panel-title"><h4>Invitation RSVP</h4></span>
      </div>
      <div class="panel-body">
        <h1>We're happy that you can attend! ðŸŽ‰<br />
        <small>Please share your plans, and click the "Confirm Attendance" button:</small></h1>
        <%= form_for @rsvp, as: :rsvp,
           url: rsvp_yes_path(@rsvp.invitation.code), method: :post,
          html: { role: 'form', class: 'form' } do |rsvp| %>
        <fieldset>

        <%= rsvp.fields_for :membership, @rsvp.membership do |m| %>
        <%= m.hidden_field :min_date, id: 'min_date', value: @rsvp.event.start_date %>
        <%= m.hidden_field :max_date, id: 'max_date', value: @rsvp.event.end_date %>
        <div class="row">
          <div class="col-md-12">
            <h2 class="rsvp-section">Arrival & Departure Dates
            <small>Event dates: <%= @rsvp.event.dates(:long) %></small></h2>
            <p><%= @rsvp.arrival_departure_intro %></p>
            <div class="form-group date-picker text-center">
              <div class="col-md-6">
                <%= m.label :arrival_date %>
                <%= m.hidden_field :arrival_date, id: 'arrival_date' %>
                <div id="arrival"></div>
              </div>
              <div class="col-md-6">
                <%= m.label :departure_date %>
                <%= m.hidden_field :departure_date, id: 'departure_date' %>
                <div id="departure"></div>
              </div>
            </div>
            <div class="row">
              <div class="col-md-12 form-inline">
                <div class="form-group">
                  <table border="0" cellpadding="20" cellspacing="20" width="100%">
                  <tr><td width="5">
                  <%= m.check_box :own_accommodation, { class: "form-control checkbox" }, true %>
                  </td><td>
                  <%= m.label :own_accommodation, 'I will book my own accommodation elsewhere' %>
                  </td></tr>
                  </table>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="row">
          <div class="col-md-12">
            <h2 class="rsvp-section midpage">Guests</h2>
            <p><%= @rsvp.guests_intro %></p>
          </div>
        </div>
        <div class="row">
          <div class="col-md-12 form-inline">
            <div class="form-group guest-options">
              <table border="0" cellpadding="20" cellspacing="20" width="100%">
              <tr><td width="5">
              <%= m.check_box :has_guest, { class: "form-control checkbox" }, true %>
              </td><td>
              <%= m.label :has_guest, @rsvp.has_guest %>
              </td></tr>
              </table>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-md-12 form-inline">
            <div class="form-group guest-options">
              <table border="0" cellpadding="20" cellspacing="20" width="100%">
              <tr><td width="5">
                <%= m.check_box :guest_disclaimer, { class: "form-control checkbox" }, true %>
              </td><td>
                <span id="guest_disclaimer"></span>
                <%= m.label :guest_disclaimer, @rsvp.guest_disclaimer %>
              </td></tr>
              </table>
            </div>
          </div>
        </div>

        <div class="row">
          <div class="col-md-12">
            <h2 class="rsvp-section midpage">Special Considerations</h2>
            <p><%= @rsvp.special_intro %></p>
          </div>
        </div>
        <div class="row">
          <div class="col-md-12 form-group">
          <%= m.text_area :special_info, size: "100x4", class: "form-control", placeholder: 'Notes to staff' %>
          </div>
        </div>
        <% end %>

        <%= rsvp.fields_for :person, @rsvp.person do |p| %>
        <div class="row">
          <div class="col-md-12">
            <h2 class="rsvp-section midpage">Personal Information</h2>
            <p><%= @rsvp.personal_info_intro %></p>
              <div class="form-group">
                <%= p.label :salutation %>
                <%= p.select :salutation, Setting.Site['salutations'], { include_blank: 'Please select' }, class: "form-control", autocomplete: "honorific-prefix" %>
              </div>
              <div class="form-group">
                <%= p.label :firstname, class: "mandatory" %>
                <%= p.text_field :firstname, class: "form-control", placeholder: 'Your given name', autocomplete: "given-name" %>
              </div>
              <div class="form-group">
                <%= p.label :lastname, class: "mandatory" %>
                <%= p.text_field :lastname, class: "form-control", placeholder: 'Your family name', autocomplete: "family-name" %>
              </div>
              <div class="form-group">
                <%= p.label :gender, class: "mandatory" %>
                <%= p.select :gender, ['M','F','O'], { include_blank: 'Please select' }, class: "form-control", autocomplete: "sex" %>
              </div>
              <div class="form-group">
                <%= p.label :affiliation, class: "mandatory" %>
                <%= p.text_field :affiliation, class: "form-control", placeholder: 'For whom do you work?', autocomplete: "organization" %>
              </div>
              <div class="form-group">
                <%= p.label :department %>
                <%= p.text_field :department, class: "form-control" %>
              </div>
              <div class="form-group">
                <%= p.label :title, 'Job Title' %>
                <%= p.text_field :title, class: "form-control", autocomplete: "organization-title" %>
              </div>
              <div class="form-group">
                <%= p.label :academic_status, class: "mandatory" %>
                <%= p.select :academic_status, Setting.Site['academic_status'], { include_blank: 'Please select' }, class: "form-control" %>
              </div>
              <div class="form-group">
                <%= p.label :phd_year, 'Year of first Ph.D.' %>
                <%= p.select :phd_year, @years, { include_blank: 'Please select if applicable' }, class: "form-control" %>
              </div>
              <div class="form-group">
                <%= p.label :email, 'E-mail', class: "mandatory" %>
                <%= p.email_field :email, class: "form-control", autocomplete: "email" %>
                <div class="form-inline inline-checkbox">
                  <%= rsvp.fields_for :membership, @rsvp.membership do |m| %>
                    <%= m.check_box :share_email, { class: "form-control checkbox" }, true %>
                    <p>Allow other members of this event to see your e-mail address</p>
                  <% end %>
                </div>
              </div>
              <div class="form-group">
                <%= p.label :url, 'Website (URL) - use "http://..."' %>
                <%= p.url_field :url, class: "form-control", autocomplete: "url" %>
              </div>
              <div class="form-group">
                <%= p.label :phone, class: "mandatory" %>
                <%= p.telephone_field :phone, class: "form-control", autocomplete: "tel" %>
              </div>
              <div class="form-group" id="address-fields">
                <label class="mandatory">Address</label>
                <div class="row">
                  <div class='col-md-12'>
                    <%= p.text_field :address1, class: "form-control", placeholder: 'Address line 1', autocomplete: "address-line1" %>
                    <%= p.text_field :address2, class: "form-control", placeholder: 'Address line 2', autocomplete: "address-line2" %>
                    <%= p.text_field :address3, class: "form-control", placeholder: 'Address line 3', autocomplete: "address-line3" %>
                  </div>
                </div>
                <div class="row">
                  <div class='col-md-4'>
                    <%= p.text_field :city, class: "form-control", placeholder: 'City', autocomplete: "address-level2" %>
                  </div>
                  <div class='col-md-4'>
                    <%= p.text_field :region, class: "form-control", placeholder: 'Province/State/Region', autocomplete: "address-level1" %>
                  </div>
                  <div class='col-md-4'>
                    <%= p.text_field :postal_code, class: "form-control", placeholder: 'Postal Code', autocomplete: "postal-code" %>
                  </div>
                </div>
                <div class="row">
                  <div class='col-md-4'>
                  <%= p.text_field :country, class: "form-control", placeholder: 'Country', autocomplete: "country-name" %>
                  </div>
                </div>
              </div>
              <div class="form-group">
                <%= p.label :emergency_contact, 'Emergency Contact Name' %>
                <%= p.text_field :emergency_contact, class: "form-control" %>
              </div>
              <div class="form-group">
                <%= p.label :emergency_phone, 'Emergency Contact Phone' %>
                <%= p.text_field :emergency_phone, class: "form-control" %>
              </div>
              <div class="form-group">
                <%= p.label :biography %>
                <%= p.text_area :biography, size: "100x4", class: "form-control", placeholder: 'An optional, brief biographical summary.' %>
              </div>
              <div class="form-group">
                <%= p.label :research_areas %>
                <%= p.text_field :research_areas, class: "form-control", placeholder: 'An optional comma-separated list of your areas of research (tags)' %>
              </div>
          </div>
        </div>
        <% end %>

        <div class="row">
          <div class="col-md-12">
            <h2 class="rsvp-section midpage">Note to the Contact Organizer</h2>
            <p>The Contact Organizer for the event, <%= @organizer %>, will be
              notified that you plan to attend, as soon as you click the
              "Confirm Attendance" button. Would you like to add something to
              the message?</p>
          </div>
        </div>
        <div class="row">
          <div class="col-md-12 form-group">
          <%= rsvp.text_area :organizer_message, size: "100x4",
               value: @organizer_message,
               class: "form-control",
               placeholder:
                 "Optional: enter a message for the organizer here." %>
          </div>
        </div>

        <div class="row">
          <div class="col-md-12">
            <%= submit_tag('Confirm Attendance', class: 'btn btn-success pull-right') %>
            <span id="click-submit" class="pull-right">Click the button
            to complete your RSVP âžœ</span>
          </div>
        </div>

        </fieldset>
        <% end %>
      </div>
      <div class="row">
        <div class="col-md-12">
          <div class="well">
            <p><%= @rsvp.privacy_notice %></p>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
